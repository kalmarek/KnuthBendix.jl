<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Using prefix automaton · KnuthBendix.jl</title><meta name="title" content="Using prefix automaton · KnuthBendix.jl"/><meta property="og:title" content="Using prefix automaton · KnuthBendix.jl"/><meta property="twitter:title" content="Using prefix automaton · KnuthBendix.jl"/><meta name="description" content="Documentation for KnuthBendix.jl."/><meta property="og:description" content="Documentation for KnuthBendix.jl."/><meta property="twitter:description" content="Documentation for KnuthBendix.jl."/><meta property="og:url" content="https://kalmarek.github.io/KnuthBendix.jl/knuthbendix_pfxA/"/><meta property="twitter:url" content="https://kalmarek.github.io/KnuthBendix.jl/knuthbendix_pfxA/"/><link rel="canonical" href="https://kalmarek.github.io/KnuthBendix.jl/knuthbendix_pfxA/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">KnuthBendix.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Theory</span><ul><li><a class="tocitem" href="../theory/">Monoids and the word problem</a></li><li><a class="tocitem" href="../knuthbendix_completion/">Confluence and the Knuth-Bendix completion</a></li></ul></li><li><span class="tocitem">Words and Alphabets</span><ul><li><a class="tocitem" href="../words/">Words</a></li><li><a class="tocitem" href="../alphabets/">Alphabets</a></li><li><a class="tocitem" href="../orders/">Orders</a></li></ul></li><li><span class="tocitem">Rewriting</span><ul><li><a class="tocitem" href="../rewriting/">On rewriting</a></li><li><a class="tocitem" href="../rewriting_system/">Rewriting System</a></li></ul></li><li><span class="tocitem">Knuth-Bendix completion</span><ul><li><a class="tocitem" href="../KB_implementations/">Implementations of Knuth-Bendix completion</a></li><li><a class="tocitem" href="../knuthbendix1/">Naive</a></li><li><a class="tocitem" href="../knuthbendix2/">Using a stack</a></li><li><a class="tocitem" href="../knuthbendix_idxA/">Using index automaton</a></li><li class="is-active"><a class="tocitem" href>Using prefix automaton</a><ul class="internal"><li><a class="tocitem" href="#Reduction"><span>Reduction</span></a></li></ul></li></ul></li><li><span class="tocitem">Automata</span><ul><li><a class="tocitem" href="../automata/">Interface</a></li><li><a class="tocitem" href="../backtrack/">Backtrack searches</a></li><li><a class="tocitem" href="../index_automaton/">Index Automaton</a></li><li><a class="tocitem" href="../prefix_automaton/">Prefix Automaton</a></li></ul></li><li><a class="tocitem" href="../parsing_kbmag/">Parsing <code>kbmag</code> input files</a></li><li><span class="tocitem">Applications</span><ul><li><a class="tocitem" href="../nc_groebner/">Non-commutative Gröbner bases</a></li><li><a class="tocitem" href="../builtin_examples/">Example rewriting systems</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Knuth-Bendix completion</a></li><li class="is-active"><a href>Using prefix automaton</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Using prefix automaton</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/kalmarek/KnuthBendix.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/kalmarek/KnuthBendix.jl/blob/master/docs/src/knuthbendix_pfxA.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-prefix-automaton"><a class="docs-heading-anchor" href="#Using-prefix-automaton">Using prefix automaton</a><a id="Using-prefix-automaton-1"></a><a class="docs-heading-anchor-permalink" href="#Using-prefix-automaton" title="Permalink"></a></h1><p>To balance the cost of maintaining the reduced rewriting system with the cost of rewrites <code>KBPrefix</code> completion algorithm employs <a href="../prefix_automaton/#KnuthBendix.Automata.PrefixAutomaton"><code>PrefixAutomaton</code></a> for both purposes. There are two major advantages of using the automaton:</p><ul><li><code>PrefixAutomaton</code> can be created from a non-reduced rewriting system;</li><li>the <code>KBPrefix</code> <a href="#Reduction">reduction</a> is an iterative process which can be interrupted <strong>before</strong> a fully reduced system is found;</li></ul><p>Unfortunately <a href="../rewriting/#Prefix-automaton-rewriting">rewrites with <code>PrefixAutomaton</code></a> are considerably slower than the ones using <code>IndexAutomaton</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="KnuthBendix.KBPrefix" href="#KnuthBendix.KBPrefix"><code>KnuthBendix.KBPrefix</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">KBPrefix</code></pre><p>Use <code>PrefixAutomaton</code> so that we don&#39;t need to maintain the reducedness of the rewriting system all the time. We use on the other hand the non-deterministic prefix automaton for (slower) rewrites.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kalmarek/KnuthBendix.jl/blob/8fc31e25c113137b6860bce0b9a879c5efd3d676/src/reduce_pfxA.jl#L1-L6">source</a></section></article><p>You can run it on a <code>rws</code> by calling</p><pre><code class="language-julia hljs">knuthbendix(KnuthBendix.Settings(KnuthBendix.KBPrefix()), rws)</code></pre><p>The default <a href="../KB_implementations/#KnuthBendix.Settings"><code>Settings</code></a> are as follows</p><pre><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; KnuthBendix.Settings(KnuthBendix.KBPrefix())</code><code class="nohighlight hljs ansi" style="display:block;">KnuthBendix.Settings{KnuthBendix.KBPrefix}:
 • algorithm            : KnuthBendix.KBPrefix()
 • max_rules            : 65536
 • reduce_delay         : 500
 • confluence_delay     : 500
 • max_length_lhs       : 9223372036854775807
 • max_length_rhs       : 9223372036854775807
 • max_length_overlap   : 9223372036854775807
 • verbosity            : 0
 • collect_dropped      : false</code></pre><p>You may alter the default parameters you may pass any number of keywords to the constructor.</p><h2 id="Reduction"><a class="docs-heading-anchor" href="#Reduction">Reduction</a><a id="Reduction-1"></a><a class="docs-heading-anchor-permalink" href="#Reduction" title="Permalink"></a></h2><p>Reduction of a rewriting system using <code>PrefixAutomaton</code> in julia-flavoured pseudocode looks as follows.</p><pre><code class="language-julia hljs">function reduce!(::KBPrefix, rws::RewritingSystem; kwargs...)
    while true
        pfxA = PrefixAutomaton(rws)
        redundant = 0
        altered = 0
        for rule in rules(rws)
            lhs, rhs = rule
            lhs_r = rewrite(lhs, pfxA, skipping=rule)
            rhs_r = rewrite(rhs, pfxA)
            lhs_r == lhs &amp;&amp; rhs_r == rhs &amp;&amp; continue # rule is reduced
            if lhs_r == rhs_r
                # rule is redundant
                redundant += 1
                deactivate!(rule)
            else # either lhs_r ≠ lhs or rhs_r ≠ rhs
                # rule is not reduced but it still carries some information
                # which does not follow from other rwrules
                altered += 1
                lhs_r, rhs_r = simplify!(lhs_r, rhs_r, ordering(rws))
                Words.store!(rule, lhs_r=&gt;rhs_r)
            end
        end
        altered == 0 &amp;&amp; redundant == 0 &amp;&amp; break # rws is reduced now
        # some early breaking conditions based on kwargs may be placed here
    end
    remove_inactive!(rws) # clean up the rewriting system
    return rws
end</code></pre><p>A single pass of the reduction looks as follow. We iterate over the rules of the rewriting system checking for one of the three possibilities.</p><ul><li>Rule is reduced w.r.t. the remaining rewriting system. This happens when  the only way to rewrite the rules&#39; left hand side is to apply the rule to itself.</li><li>Rule is redundant w.r.t. the remaining rewriting system. This happens when  the rule follows from the remaining rewriting rules, i.e. rewriting both  sides of the rule (without applying the rule itself) leads to the same word.</li><li>The rule is neither reduced nor redundant. This happens when either of the  sides of the rule can be rewritten w.r.t. the remaining rewriting system, but  the results are different.</li></ul><p>When the rule is reduced we keep it, when it is redundant we mark it as inactive and in the third case we alter the rule accordingly. The rewriting system is reduced when a fixed point (i.e. a set of rewriting rules which does not change) is reached.</p><p>Since <code>PrefixAutomaton</code> can be constructed from a non-reduced rewriting system there is no need to actually reach the fixed point! During <code>KBPrefix</code> completion the only place where a fully reduced rewriting system is needed is the early confluence check based on <code>IndexAutomaton</code>. Thus usually we can perform an early break of the reduction <code>while</code> loop e.g. after a certain number of passes or when the rewriting system did not change too much in the last pass. Even if a redundant rule survives the partial reduction this time, it will be sweeped away when partial reduction is run again.</p><p>This sometimes allows for great speed-ups in discovering new rules at the cost of operating non-reduced (hence larger) rewriting system.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../knuthbendix_idxA/">« Using index automaton</a><a class="docs-footer-nextpage" href="../automata/">Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Wednesday 20 November 2024 12:05">Wednesday 20 November 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
